# § 1065.510   Engine mapping.

(a) *Applicability, scope, and frequency.* An engine map is a data set that consists of a series of paired data points that represent the maximum brake torque versus engine speed, measured at the engine's primary output shaft. Map your engine if the standard-setting part requires engine mapping to generate a duty cycle for your engine configuration. Map your engine while it is connected to a dynamometer or other device that can absorb work output from the engine's primary output shaft according to § 1065.110. Configure any auxiliary work inputs and outputs such as hybrid, turbo-compounding, or thermoelectric systems to represent their in-use configurations and use the same configuration for emission testing. See figure 1 to paragraph (a)(5) of § 1065.210. This may involve configuring initial states of charge and rates and times of auxiliary-work inputs and outputs. We recommend that you contact the EPA Program Officer before testing to determine how you should configure any auxiliary-work inputs and outputs. If your engine has an auxiliary emission control device to reduce torque output that may activate during engine mapping, turn it off before mapping. Use the most recent engine map to transform a normalized duty cycle from the standard-setting part to a reference duty cycle specific to your engine. Normalized duty cycles are specified in the standard-setting part. You may update an engine map at any time by repeating the engine-mapping procedure. You must map or re-map an engine before a test if any of the following apply:






(1) If you have not performed an initial engine map.


(2) If the atmospheric pressure near the engine's air inlet is not within ±5 kPa of the atmospheric pressure recorded at the time of the last engine map.


(3) If the engine or emission-control system has undergone changes that might affect maximum torque performance. This includes changing the configuration of auxiliary work inputs and outputs.


(4) If you capture an incomplete map on your first attempt or you do not complete a map within the specified time tolerance. You may repeat mapping as often as necessary to capture a complete map within the specified time.




(b) *Mapping variable-speed engines.* Map variable-speed engines using the procedure in this paragraph (b). Note that under § 1065.10(c) we may allow or require you to use “other procedures” if the specified procedure results in unrepresentative testing or if your engine cannot be tested using the specified procedure. If the engine has a user-adjustable idle speed setpoint, you may set it to its minimum adjustable value for this mapping procedure and the resulting map may be used for any test, regardless of where it is set for running each test except that the warm idle speed(s) must be determined based on where it is set for running each test.


(1) Record the atmospheric pressure.


(2) Warm up the engine by operating it. We recommend operating the engine at any speed and at approximately 75% of its expected maximum power. Continue the warm-up until the engine coolant, block, lubricating oil, or head absolute temperature is within ±2% of its mean value for at least 2 min or until the engine thermostat controls engine temperature.


(3) Operate the engine at its warm idle speed as follows:


(i) For engines with a low-speed governor, set the operator demand to minimum, use the dynamometer or other loading device to target a torque of zero or the lowest idle load that you will use for cycle generation on the engine's primary output shaft, and allow the engine to govern the speed. If the idle load is a function of engine speeds (*e.g.,* the optional declared power from paragraph (f)(6) of this section), calculate the target torque in real time. Measure this warm idle speed; we recommend recording at least 30 values of speed and using the mean of those values. If you identify multiple warm idle loads under paragraph (f)(4), (f)(5)(iii), or (f)(6) of this section, measure the warm idle speed at the lowest torque level for this paragraph (b)(3). Measure the other warm idle speeds as described in paragraph (b)(7) of this section.


(ii) For engines without a low-speed governor, operate the engine at warm idle speed from paragraph (f)(2) of this section and zero torque or the lowest warm idle torque that you will use for cycle generation on the engine's primary output shaft. You may use the dynamometer to control either torque or speed and manipulate the operator demand to control the other parameter.


(4) Operate the engine at the minimum mapped speed. A minimum mapped speed equal to (95 ± 1)% of its warm idle speed determined in paragraph (b)(3) of this section may be used for any engine or test. A higher minimum mapped speed may be used if all the duty cycles that the engine is subject to have a minimum reference speed higher than the warm idle speed determined in paragraph (b)(3) of this section. In this case you may use a minimum mapped speed equal to (95 ± 1)% of the lowest minimum reference speed in all the duty cycles the engine is subject to. Set operator demand to maximum and control engine speed at this minimum mapped speed for at least 15 seconds. Set operator demand to maximum and control engine speed at (95 ± 1)% of its warm idle speed determined in paragraph (b)(3)(i) of this section for at least 15 seconds.


(5) Perform a continuous or discrete engine map as described in paragraph (b)(5)(i) or (ii) of this section. A continuous engine map may be used for any engine. A discrete engine map may be used for engines subject only to steady-state duty cycles. Use linear interpolation between the series of points generated by either of these maps to determine intermediate torque values. Use the series of points generated by either of these maps to generate the power map as described in paragraph (e) of this section.


(i) For continuous engine mapping, begin recording mean feedback speed and torque at 1 Hz or more frequently and increase speed at a constant rate such that it takes (4 to 6) min to sweep from the minimum mapped speed described in paragraph (b)(4) of this section to the check point speed described in paragraph (b)(5)(iii) of this section. Use good engineering judgment to determine when to stop recording data to ensure that the sweep is complete. In most cases, this means that you can stop the sweep at any point after the power falls to 50% of the maximum value.


(ii) For discrete engine mapping, select at least 20 evenly spaced setpoints from the minimum mapped speed described in paragraph (b)(4) of this section to the check point speed described in paragraph (b)(5)(iii) of this section. At each setpoint, stabilize speed and allow torque to stabilize. We recommend that you stabilize an engine for at least 15 seconds at each setpoint and record the mean feedback speed and torque of the last (4 to 6) seconds. Record the mean speed and torque at each setpoint.


(iii) The check point speed of the map is the highest speed above maximum power at which 50% of maximum power occurs. If this speed is unsafe or unachievable (*e.g.,* for ungoverned engines or engines that do not operate at that point), use good engineering judgment to map up to the maximum safe speed or maximum achievable speed. For discrete mapping, if the engine cannot be mapped to the check point speed, make sure the map includes at least 20 points from 95% of warm idle to the maximum mapped speed. For continuous mapping, if the engine cannot be mapped to the check point speed, verify that the sweep time from 95% of warm idle to the maximum mapped speed is (4 to 6) min.


(iv) Note that under § 1065.10(c)(1) we may allow you to disregard portions of the map when selecting maximum test speed if the specified procedure would result in a duty cycle that does not represent in-use operation.


(6) Determine warm high-idle speed for engines with a high-speed governor. You may skip this if the engine is not subject to transient testing with a duty cycle that includes reference speed values above 100%. You may use a manufacturer-declared warm high-idle speed if the engine is electronically governed. For engines with a high-speed governor that regulates speed by disabling and enabling fuel or ignition at two manufacturer-specified speeds, declare the middle of this specified speed range as the warm high-idle speed. You may alternatively measure warm high-idle speed using the following procedure:


(i) Run an operating point targeting zero torque.


(A) Set operator demand to maximum and use the dynamometer to target zero torque on the engine's primary output shaft.


(B) Wait for the engine governor and dynamometer to stabilize. We recommend that you stabilize for at least 15 seconds.


(C) Record 1 Hz means of the feedback speed and torque for at least 30 seconds. You may record means at a higher frequency as long as there are no gaps in the recorded data. For engines with a high-speed governor that regulates speed by disabling and enabling fuel or ignition, you may need to extend this stabilization period to include at least one disabling event at the higher speed and one enabling event at the lower speed.


(D) Determine if the feedback speed is stable over the recording period. The feedback speed is considered stable if all the recorded 1 Hz means are within ±2% of the mean feedback speed over the recording period. If the feedback speed is not stable because of the dynamometer, void the results and repeat measurements after making any necessary corrections. You may void and repeat the entire map sequence, or you may void and replace only the results for establishing warm high-idle speed; use good engineering judgment to warm-up the engine before repeating measurements.


(E) If the feedback speed is stable, use the mean feedback speed over the recording period as the measured speed for this operating point.


(F) If the feedback speed is not stable because of the engine, determine the mean as the value representing the midpoint between the observed maximum and minimum recorded feedback speed.


(G) If the mean feedback torque over the recording period is within (0 ± 1)% of *T*_maxmapped,_ use the measured speed for this operating point as the warm high-idle speed. Otherwise, continue testing as described in paragraph (b)(6)(ii) of this section.


(ii) Run a second operating point targeting a positive torque. Follow the same procedure in paragraphs (b)(6)(i)(A) through (F) of this section, except that the dynamometer is set to target a torque equal to the mean feedback torque over the recording period from the previous operating point plus 20% of *T*_max mapped._

(iii) Use the mean feedback speed and torque values from paragraphs (b)(6)(i) and (ii) of this section to determine the warm high-idle speed. If the two recorded speed values are the same, use that value as the warm high-idle-speed. Otherwise, use a linear equation passing through these two speed-torque points and extrapolate to solve for the speed at zero torque and use this speed intercept value as the warm high-idle speed.


(iv) You may use a manufacturer-declared *T*_max_ instead of the measured *T*_max mapped._ If you do this, you may also measure the warm high-idle speed as described in this paragraph (b)(6) before running the operating point and speed sweeps specified in paragraphs (b)(4) and (5) of this section.


(7) This paragraph (b)(7) describes how to collect additional data to determine warm idle speed(s) for cycle generation if your engine has a low-speed governor. You may omit this paragraph (b)(7) if you use the option to declare a warm idle speed in paragraph (f)(3)(iv) of this section, or if you identify only one idle load and one user-adjustable idle speed setpoint under paragraph (b)(3)(i) of this section. Collect additional data to determine warm idle speed(s) using one of the following options:


(i) For each idle load (*e.g.,* idle with the transmission in neutral and drive) you identify under paragraph (f)(4), (f)(5)(iii), or (f)(6) of this section, operate the engine at each idle load and measure the warm idle speed at each idle load as described in paragraph (b)(3)(i) of this section. The warm idle operating point run in paragraph (b)(3)(i) of this section may be skipped and the measured warm idle speed from paragraph (b)(3)(i) of this section may be used for cycle generation for cycles where the user-adjustable idle speed setpoint is the same. Note that this option requires you to know all the idle loads in all the cycles that will be generated with this map at the time the map is run.


(ii) You may map the idle governor at multiple torque levels and use this map to determine the warm idle speed(s) at any idle load within the range of this map. For cases where the idle torque is a function of engine speeds (*e.g.,* if CITT is specified as a function of speed or if the optional declared power in paragraph (f)(6) of this section applies) we recommend that the warm idle speed be determined using a closed form solution assuming speed and torque vary linearly between points in this map. If an iterative method is used, continue to iterate until the value is within ±0.0001% of the previous value.


(8) This paragraph (b)(8) describes how to collect additional data to determine warm idle speed(s) for cycle generation if your engine has a low-speed governor and a user-adjustable idle speed setpoint and you need to generate cycles for tests with a different setpoint from the setpoint used in this mapping procedure. You may omit this paragraph (b)(8) if you use the option to declare a warm idle speed in paragraph (f)(3)(iv) of this section. Collect additional data using paragraph (b)(7) of this section to determine the warm idle speed for each setpoint for use in generating cycles. Record the warm idle speed and torque for each setpoint.


(c) *Negative torque mapping.* If your engine is subject to a reference duty cycle that specifies negative torque values (*i.e.,* engine motoring), generate a motoring torque curve by any of the following procedures:


(1) Multiply the positive torques from your map by −40%. Use linear interpolation to determine intermediate values.


(2) Map the amount of negative torque required to motor the engine by repeating paragraph (b) of this section with minimum operator demand, as applicable. You may start the negative torque map at either the minimum or maximum speed from paragraph (b) of this section.


(3) Determine the amount of negative torque required to motor the engine at the following two points near the ends of the engine's speed range. Operate the engine at these two points at minimum operator demand. Use linear interpolation to determine intermediate values.


(i) *Low-speed point.* For engines without a low-speed governor, determine the amount of negative torque at warm idle speed. For engines with a low-speed governor, motor the engine above warm idle speed so the governor is inactive and determine the amount of negative torque at that speed.


(ii) *High-speed point.* For engines without a high-speed governor, determine the amount of negative torque at the maximum safe speed or the maximum representative speed. For engines with a high-speed governor, determine the amount of negative torque at a speed at or above *n*_hi_ per § 1065.610(c)(2).


(4) For engines with an electric hybrid system, map the negative torque required to motor the engine and absorb any power delivered from the RESS by repeating paragraph (g)(2) of this section with minimum operator demand, stopping the sweep to discharge the RESS when the absolute instantaneous power measured from the RESS drops below the expected maximum absolute power from the RESS by more than 2% of total system maximum power (including engine motoring and RESS power) as determined from mapping the negative torque.


(5) For engines with an electric hybrid system, map the negative torque required to motor the engine by repeating paragraph (b) of this section with minimum operator demand and a fully charged RESS or with the hybrid system disabled, such that it doesn't affect the motoring torque. You may start the negative torque map at either the minimum or maximum speed from paragraph (b) of this section.


(d) *Mapping constant-speed engines.* Map constant-speed engines using the procedure in this paragraph (d). When testing without a motoring dynamometer (*e.g.,* eddy-current or water-brake dynamometer or any device that is already installed on a vehicle, equipment, or vessel) operate these devices over the no-load operating points in the procedure as close to no-load as possible.


(1) Record the atmospheric pressure.


(2) Warm up the engine by operating it. We recommend operating the engine at approximately 75% of the engine's expected maximum power. Continue the warm-up until the engine coolant, block, or head absolute temperature is within ±2% of its mean value for at least 2 min or until the engine thermostat controls engine temperature.


(3) You may operate the engine with a production constant-speed governor or simulate a constant-speed governor by controlling engine speed with an operator demand control system described in § 1065.110. Use either isochronous or speed-droop governor operation, as appropriate.


(4) With the governor or simulated governor controlling speed using operator demand, operate the engine at the no-load, or minimum achievable load, governed speed (at high speed, not low idle) for at least 15 seconds.




(5) Record at 1 Hz the mean of feedback speed and torque. Use the dynamometer to increase torque at a constant rate. Unless the standard-setting part specifies otherwise, complete the map such that it takes (2 to 4) min to sweep from no-load governed speed to the speed below maximum mapped power at which the engine develops 90% of maximum mapped power. You may map your engine to lower speeds. Stop recording after you complete the sweep. Use this series of speeds and torques to generate the power map as described in paragraph (e) of this section.




(i) For constant-speed engines subject only to steady-state testing, you may perform an engine map by using a series of discrete torques. Select at least five evenly spaced torque setpoints from no-load to 80% of the manufacturer-declared test torque or to a torque derived from your published maximum power level if the declared test torque is unavailable. Starting at the 80% torque point, select setpoints in 2.5% or smaller intervals, stopping at the endpoint torque. The endpoint torque is defined as the first discrete mapped torque value greater than the torque at maximum observed power where the engine outputs 90% of the maximum observed power; or the torque when engine stall has been determined using good engineering judgment (*i.e.,* sudden deceleration of engine speed while adding torque). You may continue mapping at higher torque setpoints. At each setpoint, allow torque and speed to stabilize. Record the mean feedback speed and torque at each setpoint. From this series of mean feedback speed and torque values, use linear interpolation to determine intermediate values. Use this series of mean feedback speeds and torques to generate the power map as described in paragraph (e) of this section.






(ii) For any constant-speed engine, you may perform an engine map with a continuous torque sweep by continuing to record the mean feedback speed and torque at 1 Hz or more frequently. Use the dynamometer to increase torque. Increase the reference torque at a constant rate from no-load to the endpoint torque as defined in paragraph (d)(5)(i) of this section. You may continue mapping at higher torque setpoints. Unless the standard-setting part specifies otherwise, target a torque sweep rate equal to the manufacturer-declared test torque (or a torque derived from your published power level if the declared test torque is not known) divided by 180 seconds. Stop recording after you complete the sweep. Verify that the average torque sweep rate over the entire map is within ±7% of the target torque sweep rate. Use linear interpolation to determine intermediate values from this series of mean feedback speed and torque values. Use this series of mean feedback speeds and torques to generate the power map as described in paragraph (e) of this section.


(iii) For any isochronous governed (no speed droop) constant-speed engine, you may map the engine with two points as described in this paragraph (d)(5)(iii). After stabilizing at the no-load, or minimum achievable load, governed speed in paragraph (d)(4) of this section, record the mean feedback speed and torque. Continue to operate the engine with the governor or simulated governor controlling engine speed using operator demand and control the dynamometer to target a speed of 99.5% of the recorded mean no-load governed speed. Allow speed and torque to stabilize. Record the mean feedback speed and torque. Record the target speed. The absolute value of the speed error (the mean feedback speed minus the target speed) must be no greater than 0.1% of the recorded mean no-load governed speed. From this series of two mean feedback speed and torque values, use linear interpolation to determine intermediate values. Use this series of two mean feedback speeds and torques to generate a power map as described in paragraph (e) of this section. Note that the measured maximum test torque as determined in § 1065.610(b)(1) will be the mean feedback torque recorded on the second point.










(e) *Power mapping.* For all engines, create a power-versus-speed map by transforming torque and speed values to corresponding power values. Use the mean values from the recorded map data. Do not use any interpolated values. Multiply each torque by its corresponding speed and apply the appropriate conversion factors to arrive at units of power (kW). Interpolate intermediate power values between these power values, which were calculated from the recorded map data.




(f) *Measured and declared speeds, torques, and power.* You must select speeds, torques, and power for engine mapping and for cycle generation as required in this paragraph (f). “Measured” values are either directly measured during the engine mapping process or they are determined from the engine map. “Declared” values are specified by the manufacturer. When both measured and declared values are available, you may use declared test speeds and torques instead of measured speeds and torques if they meet the criteria in this paragraph (f). Otherwise, you must use measured speeds and torques derived from the engine map.


(1) *Measured speeds and torques.* Determine the applicable speeds and torques for the duty cycles you will run:


(i) Measured maximum test speed for variable-speed engines according to § 1065.610.


(ii) Measured maximum test torque for constant-speed engines according to § 1065.610.


(iii) Measured “A”, “B”, and “C” speeds for variable-speed engines according to § 1065.610.


(iv) Measured intermediate speed for variable-speed engines according to § 1065.610.


(v) For variable-speed engines with a low-speed governor, measure warm idle speed(s) according to paragraph (b) of this section and use this (these) speed(s) for cycle generation in § 1065.512. For engines with no low-speed governor, instead use the manufacturer-declared warm idle speed from paragraph (f)(2) of this section.


(2) *Required declared speeds.* You must declare the lowest engine speed possible with minimum load (*i.e.,* manufacturer-declared warm idle speed). This is applicable only to variable-speed engines with no low-speed governor. For engines with no low-speed governor, the declared warm idle speed is used for cycle generation in § 1065.512. Declare this speed in a way that is representative of in-use operation. For example, if your engine is typically connected to an automatic transmission or a hydrostatic transmission, declare this speed at the idle speed at which your engine operates when the transmission is engaged.


(3) *Optional declared speeds.* You may use declared speed instead of measured speed as follows:


(i) You may use a declared value for maximum test speed for variable-speed engines if it is within (97.5 to 102.5)% of the corresponding measured value. You may use a higher declared speed if the length of the “vector” at the declared speed is within 2% of the length of the “vector” at the measured value. The term vector refers to the square root of the sum of normalized engine speed squared and the normalized full-load power (at that speed) squared, consistent with the calculations in § 1065.610.


(ii) You may use a declared value for intermediate, “A”, “B”, or “C” speeds for steady-state tests if the declared value is within (97.5 to 102.5)% of the corresponding measured value.


(iii) For electronically governed variable-speed engines, you may use a declared warm high-idle speed for calculating the alternate maximum test speed as specified in § 1065.610.


(iv) For electronically governed variable-speed engines with an isochronous low-speed governor (*i.e.,* no speed droop), you may declare that the warm idle speed is equal to the idle speed setpoint and use it for cycle generation instead of warm idle speed(s) determined from the data collected during the engine mapping procedure in paragraph (b) of this section. When generating cycles with multiple idle torque values, you may use this idle speed setpoint for all idle points. If the idle torque is a function of speed (*e.g.,* CITT is specified as a function of speed or if the optional declared power in paragraph (f)(6) of this section applies) use the setpoint to calculate the idle torque(s) for cycle generation. If the engine has a user-adjustable idle speed setpoint, generate the cycle using the idle speed setpoint that will be set when the engine is run for that cycle.


(4) *Required declared torque.* For variable-speed engines intended primarily for propulsion of a vehicle with an automatic transmission where that engine is subject to a transient duty cycle with idle operation, you must declare a Curb-Idle Transmission Torque (CITT). We recommend that you specify CITT as a function of idle speed for engines with adjustable warm idle or enhanced-idle. You may specify a CITT based on typical applications at the mean of the range of idle speeds you specify at stabilized temperature conditions. See the required deviations for cycle generation in § 1065.610(d)(3) for how the required declared CITT and the optional declared torque in paragraph (f)(5)(iii) of this section and the optional declared power in paragraph (f)(6) of this section are used in cycle generation.








(5) *Optional declared torques.* You may use declared torque instead of measured torque as follows:


(i) For variable-speed engines you may declare a maximum torque over the engine operating range. You may use the declared value for measuring warm high-idle speed as specified in this section.


(ii) For constant-speed engines you may declare a maximum test torque. You may use the declared value for cycle generation if it is within (95 to 100)% of the measured value.


(iii) For variable-speed engines, you may declare a nonzero torque for idle operation that represents in-use operation. For example, if your engine is connected to a hydrostatic transmission with a minimum torque even when all the driven hydraulic actuators and motors are stationary and the engine is at idle, you may use this minimum torque as the declared value. As another example, if your engine is connected to a vehicle or machine with accessories, you may use a declared torque corresponding to operation with those accessories. You may specify a combination of torque and power as described in paragraph (f)(6) of this section. Use this option when the idle loads (*e.g.,* vehicle accessory loads) are best represented as a constant torque on the primary output shaft. You may use multiple warm idle loads and associated idle speeds in cycle generation for representative testing. As an example, see the required deviations for cycle generation in § 1065.610(d)(3) for improved simulation of idle points for engines intended primarily for propulsion of a vehicle with an automatic or manual transmission where that engine is subject to a transient duty cycle with idle operation.


(iv) For constant-speed engines, you may declare a warm minimum torque that represents in-use operation. For example, if your engine is typically connected to a machine that does not operate below a certain minimum torque, you may use this minimum torque as the declared value and use it for cycle generation.






(6) *Optional declared power.* For variable-speed engines, you may declare a nonzero power for idle operation that represents in-use operation. If you specify a torque in paragraph (f)(5)(iii) of this section and a power in this paragraph (f)(6), the combination of declared values must represent in-use operation and you must use the combination for cycle generation. Use the combination of declared values when the idle loads (*i.e.,* vehicle accessory loads) are best represented as a constant power.






(g) *Mapping variable-speed engines with an electric hybrid system.* Map variable-speed engines that include electric hybrid systems as described in this paragraph (g). You may ask to apply these provisions to other types of hybrid engines, consistent with good engineering judgment. However, do not use this procedure for engines used in hybrid vehicles where the hybrid system is certified as part of the vehicle rather than the engine. Follow the steps for mapping a variable-speed engine as given in paragraph (b)(5) of this section except as noted in this paragraph (g). You must generate one engine map with the hybrid system inactive as described in paragraph (g)(1) of this section, and a separate map with the hybrid system active as described in paragraph (g)(2) of this section. See the standard-setting part to determine how to use these maps. The map with the system inactive is typically used to generate steady-state duty cycles, but may also be used to generate transient cycles, such as those that do not involve engine motoring. This hybrid-inactive map is also used for generating the hybrid-active map. The hybrid-active map is typically used to generate transient duty cycles that involve engine motoring.


(1) Prepare the engine for mapping by either deactivating the hybrid system or by operating the engine as specified in paragraph (b)(4) of this section and remaining at this condition until the rechargeable energy storage system (RESS) is depleted. Once the hybrid has been disabled or the RESS is depleted, perform an engine map as specified in paragraph (b)(5) of this section. If the RESS was depleted instead of deactivated, ensure that instantaneous power from the RESS remains less than 2% of the instantaneous measured power from the engine (or engine-hybrid system) at all engine speeds.


(2) The purpose of the mapping procedure in this paragraph (g) is to determine the maximum torque available at each speed, such as what might occur during transient operation with a fully charged RESS. Use one of the following methods to generate a hybrid-active map:


(i) Perform an engine map by using a series of continuous sweeps to cover the engine's full range of operating speeds. Prepare the engine for hybrid-active mapping by ensuring that the RESS state of charge is representative of normal operation. Perform the sweep as specified in paragraph (b)(5)(i) of this section, but stop the sweep to charge the RESS when the power measured from the RESS drops below the expected maximum power from the RESS by more than 2% of total system power (including engine and RESS power). Unless good engineering judgment indicates otherwise, assume that the expected maximum power from the RESS is equal to the measured RESS power at the start of the sweep segment. For example, if the 3-second rolling average of total engine-RESS power is 200 kW and the power from the RESS at the beginning of the sweep segment is 50 kW, once the power from the RESS reaches 46 kW, stop the sweep to charge the RESS. Note that this assumption is not valid where the hybrid motor is torque-limited. Calculate total system power as a 3-second rolling average of instantaneous total system power. After each charging event, stabilize the engine for 15 seconds at the speed at which you ended the previous segment with operator demand set to maximum before continuing the sweep from that speed. Repeat the cycle of charging, mapping, and recharging until you have completed the engine map. You may shut down the system or include other operation between segments to be consistent with the intent of this paragraph (g)(2)(i). For example, for systems in which continuous charging and discharging can overheat batteries to an extent that affects performance, you may operate the engine at zero power from the RESS for enough time after the system is recharged to allow the batteries to cool. Use good engineering judgment to smooth the torque curve to eliminate discontinuities between map intervals.


(ii) Perform an engine map by using discrete speeds. Select map setpoints at intervals defined by the ranges of engine speed being mapped. From 95% of warm idle speed to 90% of the expected maximum test speed, select setpoints that result in a minimum of 13 equally spaced speed setpoints. From 90% to 110% of expected maximum test speed, select setpoints in equally spaced intervals that are nominally 2% of expected maximum test speed. Above 110% of expected maximum test speed, select setpoints based on the same speed intervals used for mapping from 95% warm idle speed to 90% maximum test speed. You may stop mapping at the highest speed above maximum power at which 50% of maximum power occurs. We refer to the speed at 50% power as the check point speed as described in paragraph (b)(5)(iii) of this section. Stabilize engine speed at each setpoint, targeting a torque value at 70% of peak torque at that speed without hybrid-assist. Make sure the engine is fully warmed up and the RESS state of charge is within the normal operating range. Snap the operator demand to maximum, operate the engine there for at least 10 seconds, and record the 3-second rolling average feedback speed and torque at 1 Hz or higher. Record the peak 3-second average torque and 3-second average speed at that point. Use linear interpolation to determine intermediate speeds and torques. Follow § 1065.610(a) to calculate the maximum test speed. Verify that the measured maximum test speed falls in the range from 92 to 108% of the estimated maximum test speed. If the measured maximum test speed does not fall in this range, repeat the map using the measured value of maximum test speed.






(h) *Other mapping procedures.* You may use other mapping procedures if you believe the procedures specified in this section are unsafe or unrepresentative for your engine. Any alternate techniques you use must satisfy the intent of the specified mapping procedures, which is to determine the maximum available torque at all engine speeds that occur during a duty cycle. Identify any deviations from this section's mapping procedures when you submit data to us.



---

[N] [73 FR 37315, June 30, 2008, as amended at 73 FR 59330, Oct. 8, 2008; 75 FR 23042, Apr. 30, 2010; 76 FR 57448, Sept. 15, 2011; 79 FR 23773, Apr. 28, 2014; 81 FR 74169, Oct. 25, 2016; 86 FR 34545, June 29, 2021; 88 FR 4676, Jan. 24, 2023; 89 FR 29802, Apr. 22, 2024; 89 FR 51237, June 17, 2024]




